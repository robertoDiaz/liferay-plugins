YUI.add("aui-image-color-filter",function(e,t){var n=e.Lang,r="image-color-filter",i="colorFilter",s=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],o=e.Component.create({NAME:r,NS:i,EXTENDS:e.ImageFilter,ATTRS:{matrix:{validator:n.isArray,value:s},swfCfg:{readonly:!0,value:{processFn:"colorMatrixFilter",params:["matrix"]}}},prototype:{FILTER_LABEL:i,FILTER_NS:i,initializer:function(e){},process:function(e,t){var n=this,r=e.data,i=n.get("matrix");if(r.length)for(var s=0;s<r.length;s+=4){var o=r[s],u=r[s+1],a=r[s+2],f=r[s+3];r[s]=o*i[0]+u*i[1]+a*i[2]+f*i[3]+i[4],r[s+1]=o*i[5]+u*i[6]+a*i[7]+f*i[8]+i[9],r[s+2]=o*i[10]+u*i[11]+a*i[12]+f*i[13]+i[14],r[s+3]=o*i[15]+u*i[16]+a*i[17]+f*i[18]+i[19]}return e}}});e.ImageColorFilter=o;var n=e.Lang,r="image-adjust-filter",i="adjustFilter",s=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],u=e.Component.create({NAME:r,NS:i,EXTENDS:e.ImageColorFilter,ATTRS:{brightness:{validator:n.isNumber,value:0},contrast:{validator:n.isNumber,value:1},saturation:{validator:n.isNumber,value:1}},prototype:{FILTER_NS:i,EDITOR_TEMPLATE:'<div><input id="contrast" min="0" max="2" step="0.01" type="range">Contrast</input><input id="brightness" min="-1" max="1" step="0.01" type="range">Brightness</input><input id="saturation" min="0" max="2" step="0.01" type="range">Saturation</input></div>',initializer:function(e){var t=this;t.after(["brightnessChange","contrastChange","saturationChange"],t._calculateColorMatrix,t)},resetEditor:function(){var e=this,t=e.getEditor();t.one("#contrast").val(1),t.one("#brightness").val(0),t.one("#saturation").val(1)},_calculateColorMatrix:function(e){var t=this,n=s.slice(0),r=t.get("brightness")*255,i=t.get("contrast"),o=(1-i)/2*255,u=t.get("saturation"),a=(1-u)*.3086,f=(1-u)*.6094,l=(1-u)*.082;n[0]=i*(a+u),n[1]=i*f,n[2]=i*l,n[4]=r+o,n[5]=i*a,n[6]=i*(f+u),n[7]=i*l,n[9]=r+o,n[10]=i*a,n[11]=i*f,n[12]=i*(l+u),n[14]=r+o,t.set("matrix",n)},_bindEditorUI:function(e,t){var n=this;e.delegate("change",function(e){var r=e.currentTarget,i=r.attr("id"),s=Number(r.val());n.set(i,s),t.preview(n.FILTER_NS)},"input")}}});e.ImageAdjustFilter=u;var n=e.Lang,r="image-grayscale-filter",i="grayscale",a=[.2225,.7169,.0606,0,0,.2225,.7169,.0606,0,0,.2225,.7169,.0606,0,0,0,0,0,1,0,0,0,0,0,0],f=e.Base.create(r,e.ImageColorFilter,[],{FILTER_LABEL:i,FILTER_NS:i},{NS:i,ATTRS:{matrix:{readOnly:!0,value:a}}});e.ImageGrayscaleFilter=f;var n=e.Lang,r="image-invert-filter",i="invert",a=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0],l=e.Base.create(r,e.ImageColorFilter,[],{FILTER_LABEL:i,FILTER_NS:i},{NS:i,ATTRS:{matrix:{readOnly:!0,value:a}}});e.ImageInvertFilter=l;var n=e.Lang,r="image-polaroid-filter",i="polaroid",a=[1.438,-0.122,-0.016,0,.03*255,-0.062,1.378,-0.016,0,12.75,-0.062,-0.122,1.483,0,-0.02*255,0,0,0,1,0,0,0,0,0,255],c=e.Base.create(r,e.ImageColorFilter,[],{FILTER_LABEL:i,FILTER_NS:i},{NS:i,ATTRS:{matrix:{readOnly:!0,value:a}}});e.ImagePolaroidFilter=c;var n=e.Lang,r="image-sepia-filter",i="sepia",a=[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0,0,0,0,0,0],h=e.Base.create(r,e.ImageColorFilter,[],{FILTER_LABEL:i,FILTER_NS:i},{NS:i,ATTRS:{matrix:{readOnly:!0,value:a}}});e.ImageSepiaFilter=h},"2.0.0",{requires:["aui-image-filter"]});
