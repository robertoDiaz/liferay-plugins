YUI.add("aui-image-editor-swf",function(e,t){var n=e.Lang,r=e.Array,i=e.UA,s="boundingBox",o=e.config.base+"aui-image-editor/assets/ImageProcessor.swf",u="flashVars",a="height",f="imageNode",l="imageUrl",c="src",h="swfCfg",p="swfUrl",d="width",v='<object class="image-processor-swf" id="{id}" {applicationType} height="{height}" width="{width}">{movie}{flashVars} <param name="wmode" value="transparent"></object>',m='<div class="image-editor-swf"></div>',g="image-editor-swf",y=e.Base.create(g,e.ImageEditorBase,[],{initializer:function(){var e=this;e._renderSwf()},clear:function(){var e=this;e._getSWFObject().clear()},getImage:function(){var e=this;return e._getSWFObject().getImage()},getImageData:function(){var e=this;return e._getSWFObject().getImageData(e.get("imageType"))},process:function(t,n,i){var s=this,o,u;if(t){t._beforeProcess&&t._beforeProcess(null,n),u=e.instanceOf(t,e.Base)?t.get(h):t[h];if(u&&u.processFn){o={},r.each(u.params,function(e){o[e]=t.get(e)});try{s._getSWFObject().process(u,o,n),i&&i()}catch(a){console.error(a)}}}},putImage:function(e,t,n){var r=this;t=t||0,n=n||0,r._getSWFObject().putImage(e,n,n)},reset:function(){var e=this;e._getSWFObject().reset(),e._notifyStateChange("reset")},save:function(){var e=this,t;t=e._getSWFObject().save(),e._notifyStateChange("save",t.prevVal,t.newVal)},_getSWFObject:function(){return e.one(".image-processor-swf").getDOMNode()},_renderSwf:function(){var t=this,r,o,h,g,y,b,w;w=t.get(p),w&&(g=t.get(f),o=t.get(u),o[l]=g.get(c),o=e.QueryString.stringify(t.get(u)),r='type="application/x-shockwave-flash" data="'+w+'"',y="",i.ie&&(r='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"',y='<param name="movie" value="'+w+'"/>'),h="",o&&(h='<param name="flashVars" value="'+o+'" />'),b=e.Node.create(m),b.append(n.sub(v,{applicationType:r,id:e.guid(),flashVars:h,height:g.get(a),movie:y,width:g.get(d)})),b.append(g),t.get(s).append(b))}},{ATTRS:{flashVars:{validator:n.isObject,value:{}},swfUrl:{validator:n.isString,value:o}}});e.ImageEditorSwf=y},"2.0.0",{requires:["querystring-stringify-simple"]});
