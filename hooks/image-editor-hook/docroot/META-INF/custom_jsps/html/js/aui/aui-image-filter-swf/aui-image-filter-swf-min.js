YUI.add("aui-image-filter-swf",function(e,t){var n=e.Lang,r=e.UA,i=e.Array,s=e.config.doc,o=e.config.base+"../src/aui-image-editor/as/ImageFilter.swf",u="flashVars",a="swfUrl",f='<object id="{id}" {applicationType} height="{height}" width="{width}">{movie}{fixedAttributes}{flashVars}</object>',l="image-filter-swf",c=e.Base.create(l,e.ImageFilterBase,[],{initializer:function(){var t=this,n=t.get("containerNode");t._filterSwf=e.Node.create('<div class="filterswf"></div>');var r=n.one("img"),i=r.attr("src");t._src=i,t.set("swfHeight",r.height().toString()),t.set("swfWidth",r.width().toString()),n.empty(),n.append(t._filterSwf),t._renderSwf()},clear:function(){var e=this;e._getSWFObject().clear()},getImage:function(){var e=this;return e._getSWFObject().getImage()},getImageData:function(){var e=this;return e._getSWFObject().getImageData()},preview:function(e,t,n){var r=this,s=r[e],o=s.get("swfCfg");if(o&&o.processFn){var u={};i.each(o.params,function(e,t,n){u[e]=s.get(e)}),r._getSWFObject().preview(o.processFn,u)}},putImage:function(e,t,n){var r=this,t=t||0,n=n||0;r._getSWFObject().putImage(e,n,n)},reset:function(){var e=this;e._getSWFObject().reset()},save:function(){var e=this,t=e._getSWFObject().save();e._notifyStateChange("save",t)},_getSWFObject:function(){var t=this;return e.one(".filterswf object").getDOMNode()},_renderSwf:function(){var t=this,i=t.get(a);if(i){var s=t.get(u);s.imageUrl=t._src;var o=e.QueryString.stringify(s);t._swfId?t._audio.removeChild(e.one("#"+t._swfId)):t._swfId=e.guid();var l='type="application/x-shockwave-flash" data="'+i+'"',c="";r.ie&&(l='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"',c='<param name="movie" value="'+i+'"/>');var h="";o&&(h='<param name="flashVars" value="'+o+'" />');var p=t.get("swfHeight"),d=t.get("swfWidth"),v=n.sub(f,{applicationType:l,id:t._swfId,fixedAttributes:"",flashVars:h,height:p,movie:c,width:d});t._filterSwf.append(v)}}},{ATTRS:{flashVars:{value:{},validator:n.isObject},swfHeight:{value:"100%",validator:n.isString},swfUrl:{value:o,validator:n.isString},swfWidth:{value:"100%",validator:n.isString}}});e.ImageFilterSWF=c},"2.0.0",{requires:["querystring-stringify-simple"]});
