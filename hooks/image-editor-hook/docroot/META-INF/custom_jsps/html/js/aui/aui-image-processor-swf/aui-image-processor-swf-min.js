YUI.add("aui-image-processor-swf",function(e,t){var n=e.Lang,r=e.UA,i=e.Array,s=e.config.doc,o=e.config.base+"/aui-image-editor/assets/ImageProcessor.swf",u="flashVars",a="swfUrl",f='<object id="{id}" {applicationType} height="{height}" width="{width}">{movie}{fixedAttributes}{flashVars}</object>',l="image-processor-swf",c=e.Base.create(l,e.ImageProcessorBase,[],{initializer:function(){var t=this,n=t.get("imageNode"),r=t.get("srcNode"),i,s,o,u,a;t._filterSwf=e.Node.create('<div class="filterswf"></div>'),t.set("swfHeight",n.height().toString()),t.set("swfWidth",n.width().toString()),r.empty(),r.append(t._filterSwf),t._renderSwf()},clear:function(){var e=this;e._getSWFObject().clear()},getImage:function(){var e=this;return e._getSWFObject().getImage()},getImageData:function(){var e=this;return e._getSWFObject().getImageData()},preview:function(e,t,n){var r=this,s=r[e],o=s.get("swfCfg");if(o&&o.processFn){var u={};i.each(o.params,function(e,t,n){u[e]=s.get(e)}),r._getSWFObject().preview(o.processFn,u)}},putImage:function(e,t,n){var r=this,t=t||0,n=n||0;r._getSWFObject().putImage(e,n,n)},reset:function(){var e=this;e._getSWFObject().reset()},save:function(){var e=this,t=e._getSWFObject().save();e._notifyStateChange("save",t)},_getSWFObject:function(){var t=this;return e.one(".filterswf object").getDOMNode()},_renderSwf:function(){var t=this,i=t.get("imageNode"),s=t.get(a);if(s){var o=t.get(u);o.imageUrl=i.attr("src");var l=e.QueryString.stringify(o);t._swfId?t._audio.removeChild(e.one("#"+t._swfId)):t._swfId=e.guid();var c='type="application/x-shockwave-flash" data="'+s+'"',h="";r.ie&&(c='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"',h='<param name="movie" value="'+s+'"/>');var p="";l&&(p='<param name="flashVars" value="'+l+'" />');var d=t.get("swfHeight"),v=t.get("swfWidth"),m=n.sub(f,{applicationType:c,id:t._swfId,fixedAttributes:"",flashVars:p,height:d,movie:h,width:v});t._filterSwf.append(m)}}},{ATTRS:{flashVars:{value:{},validator:n.isObject},swfHeight:{value:"100%",validator:n.isString},swfUrl:{value:o,validator:n.isString},swfWidth:{value:"100%",validator:n.isString}}});e.ImageProcessorSWF=c},"2.0.0",{requires:["querystring-stringify-simple"]});
