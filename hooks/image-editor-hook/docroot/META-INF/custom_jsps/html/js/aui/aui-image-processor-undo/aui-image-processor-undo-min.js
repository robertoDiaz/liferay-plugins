YUI.add("aui-image-processor-undo",function(e,t){var n=e.Lang,r="image-processor-undo",i="imageProcessorUndo",s=e.Component.create({NAME:r,NS:i,EXTENDS:e.Plugin.Base,ATTRS:{levels:{validator:n.isNumber,value:50}},prototype:{initializer:function(t){var n=this,r=n.get("host");n._stackIndex=0,n._stack=[],n._eventHandles=[r.on("imageProcessor:clear",n._onFilterClear,n),r.on("imageProcessor:preview",n._onFilterPreview,n),r.on("imageProcessor:reset",n._onFilterReset,n),r.on("imageProcessor:save",n._onFilterSave,n)],r.redo=e.bind(n._redo,n),r.undo=e.bind(n._undo,n)},destructor:function(){var t=this;delete host.redo,delete host.undo,(new e.EventHandle(t._eventHandles)).detach()},_redo:function(){var e=this,t=e.get("host"),n;e._stackIndex<e._stack.length&&(n=e._stack[e._stackIndex++],t.putImage(n))},_undo:function(){var e=this,t=e.get("host"),n;e._stackIndex>0&&(n=e._stack[--e._stackIndex],t.putImage(n))},_onFilterClear:function(e){var t=this},_onFilterPreview:function(e){var t=this},_onFilterReset:function(e){var t=this},_onFilterSave:function(e){var t=this;t._stack[t._stackIndex++]=e.prevVal}}});e.ImageProcessorUndo=s},"2.0.0",{requires:["plugin","aui-component"]});
